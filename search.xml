<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>关于Bypass的使用</title>
    <url>/2019/12/26/Bypass/</url>
    <content><![CDATA[<p>Bypass使用起来超级简单，效率比某些抢票平台高一大截 ，你要是在充个VIP那你真是可以光速抢票了，只要有票情况下完全可以抢得过网上的黄牛。废话不多说，开始！<br><img src="https://i.loli.net/2019/12/25/wFdvxZbCLgTNMue.jpg" alt=""></p>
<a id="more"></a>
<h3 id="1、首先去官网下载一个Bypass的软件"><a href="#1、首先去官网下载一个Bypass的软件" class="headerlink" title="1、首先去官网下载一个Bypass的软件"></a>1、首先去官网下载一个Bypass的软件</h3><p>官网地址：<a href="https://www.bypass.cn/" target="_blank" rel="noopener">https://www.bypass.cn/</a> </p>
<p>安装步骤我就不说了。解压即用！</p>
<p>然后登陆自己的12306</p>
<p>填写出发地，目的地，购票日期，可以同时抢多天，填完后就查询车票</p>
<p><img src="https://i.loli.net/2019/12/26/3V6gQN1pkaY4WwD.jpg" alt=""></p>
<h3 id="2、查询车票"><a href="#2、查询车票" class="headerlink" title="2、查询车票"></a>2、查询车票</h3><p><img src="https://i.loli.net/2019/12/26/AWT1OmZN9gzlVYJ.jpg" alt=""></p>
<h3 id="3、添加车次后就够选乘车人，选坐席（最好二等座，无座都选了）"><a href="#3、添加车次后就够选乘车人，选坐席（最好二等座，无座都选了）" class="headerlink" title="3、添加车次后就够选乘车人，选坐席（最好二等座，无座都选了）"></a>3、添加车次后就够选乘车人，选坐席（最好二等座，无座都选了）</h3><h3 id="4、然后开始抢票"><a href="#4、然后开始抢票" class="headerlink" title="4、然后开始抢票"></a>4、然后开始抢票</h3><p><img src="https://i.loli.net/2019/12/26/i2sjFCSlbfNugU5.jpg" alt=""></p>
<p>我图片上面的修改间隔100是因为我冲了VIP才能调这么低的</p>
<p>充VIP的好处：<br>1、可以修改间隔到最低100，也就是0.1秒刷新一次，1000是没充VIP最低限制，也就是1秒<br>2、VIP用户还可以自动云验证，也就是你账号掉了自动登录，不用你输入验证码。<br>感觉就这两个好处！</p>
<p>调那个间隔注意哦，日常抢的话1000就好了。如果你有VIP的话就在刚放票那个时候把间隔调到100，这个很无脑，用就了估计会被封IP</p>
<p>下面就是设置通知方式，我的都是设置邮件通知。邮件通知要到邮箱里面开那个授权码。不会的还是使用QQ通知吧。</p>
<p><img src="https://i.loli.net/2019/12/26/toeukVaR1dHTDXy.jpg" alt=""></p>
<h3 id="5、下面是充VIP教程"><a href="#5、下面是充VIP教程" class="headerlink" title="5、下面是充VIP教程"></a>5、下面是充VIP教程</h3><p>充完后就重新登录一下账号就可以了</p>
<p><img src="https://i.loli.net/2019/12/26/Kl1cHLg2VUkvndw.jpg" alt=""></p>
<p>大概就这么点，很容易，你就在上面填填信息就好了。最麻烦的就是你得整天用电脑挂着。</p>
<p>还有就是整点放票抢的时候，如果你没有VIP你最好就守着，不然会被挤掉线你没有云打码不能自动登录的。就算有VIP整点放票的时候你还是得守着吧，因为有个滑动验证是要手动验证的。因为刚放票的时候很多人同一时间抢就很容出现问题。</p>
]]></content>
      <categories>
        <category>Bypass</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>搭建个人博客blog</title>
    <url>/2019/12/25/mybolog/</url>
    <content><![CDATA[<p>这个是一个简单hexo搭建个人博客的教程！<br><img src="https://i.loli.net/2019/12/25/tbZ5FGSfxcwjUpY.jpg" alt=""></p>
<a id="more"></a>
<h3 id="1、安装Git"><a href="#1、安装Git" class="headerlink" title="1、安装Git"></a>1、安装Git</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install git-core -y</span><br><span class="line">yum -y install git</span><br></pre></td></tr></table></figure>

<h3 id="2、安装node-js"><a href="#2、安装node-js" class="headerlink" title="2、安装node.js"></a>2、安装node.js</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl方式：</span><br><span class="line">curl -o- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;nvm-sh&#x2F;nvm&#x2F;v0.34.0&#x2F;install.sh | sh</span><br><span class="line">wget方式：</span><br><span class="line">wget -qO- https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;nvm-sh&#x2F;nvm&#x2F;v0.34.0&#x2F;install.sh | sh</span><br></pre></td></tr></table></figure>

<h3 id="3、安装完成后，重启终端并执行下列命令即可安装-Node-js"><a href="#3、安装完成后，重启终端并执行下列命令即可安装-Node-js" class="headerlink" title="3、安装完成后，重启终端并执行下列命令即可安装 Node.js"></a>3、安装完成后，重启终端并执行下列命令即可安装 Node.js</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">重启</span><br><span class="line"># reboot</span><br><span class="line">重启完成后</span><br><span class="line"># nvm install node</span><br></pre></td></tr></table></figure>

<h3 id="4、安装hexo"><a href="#4、安装hexo" class="headerlink" title="4、安装hexo"></a>4、安装hexo</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h3 id="5、建站"><a href="#5、建站" class="headerlink" title="5、建站"></a>5、建站</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir &#x2F;data</span><br><span class="line">cd &#x2F;data</span><br><span class="line">hexo init Blog  </span><br><span class="line">cd Blog</span><br><span class="line">npm install</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>

<h3 id="6、本地访问"><a href="#6、本地访问" class="headerlink" title="6、本地访问"></a>6、本地访问</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo s</span><br><span class="line">去浏览器端访问hosts</span><br><span class="line">http:&#x2F;&#x2F;192.168.78.12:4000</span><br></pre></td></tr></table></figure>

<h3 id="新建完成后，指定文件夹的目录如下："><a href="#新建完成后，指定文件夹的目录如下：" class="headerlink" title="新建完成后，指定文件夹的目录如下："></a>新建完成后，指定文件夹的目录如下：</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source|</span><br><span class="line">├── _drafts|</span><br><span class="line">└── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">文件/文件夹</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">_config.yml</td>
<td align="center">配置文件</td>
</tr>
<tr>
<td align="center">public</td>
<td align="center">生成的静态文件，这个目录最终会发布到服务器</td>
</tr>
<tr>
<td align="center">scaffolds</td>
<td align="center">一些通用的markdown模板</td>
</tr>
<tr>
<td align="center">source</td>
<td align="center">编写的markdown文件，_drafts草稿文件，_posts发布的文章</td>
</tr>
<tr>
<td align="center">themes</td>
<td align="center">主题文件夹，Hexo 会根据主题来生成静态页面。</td>
</tr>
</tbody></table>
<p>主题风格可以去<a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a> 官网下载</p>
<h3 id="编写一篇文章"><a href="#编写一篇文章" class="headerlink" title="编写一篇文章"></a>编写一篇文章</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># hexo new &quot;hexo&quot;</span><br><span class="line"># vim source&#x2F;_post&#x2F;hexo</span><br><span class="line">---</span><br><span class="line">title: hexo——轻量、简易的博客</span><br><span class="line">date: 2019-10-12 14:40:46</span><br><span class="line">tags: </span><br><span class="line">  - Hexo</span><br><span class="line">  - 教程</span><br><span class="line">categories:</span><br><span class="line">  - Hexo</span><br><span class="line">  - 教程</span><br><span class="line">keywords: &quot;Hexo,Blog,Linux&quot;</span><br><span class="line">top_img:</span><br><span class="line">cover: https:&#x2F;&#x2F;i.loli.net&#x2F;2019&#x2F;10&#x2F;12&#x2F;gye1tIzLdiuwX2S.jpg</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Hello word</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Hexo</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>文件权限之高级权限</title>
    <url>/2019/07/20/Linux_file_permission2/</url>
    <content><![CDATA[<h3 id="一-高级权限"><a href="#一-高级权限" class="headerlink" title="一. 高级权限"></a>一. 高级权限</h3><p>高级权限 suid,sgid,sticky</p>
<p>问题1： 为什么会失败！</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# ll /root/file1.txt  -rw-r--r-- 1 root root 4 7月  27 14:14 /root/file1.txt</span><br><span class="line"></span><br><span class="line">[alice@tianyun ~]$ cat /root/file1.txt </span><br><span class="line">cat: /root/file1.txt: 权限不够</span><br></pre></td></tr></table></figure>

<p>分析： root            /usr/bin/cat (root)            /root/file1.txt          OK      </p>
<pre><code>alice      /usr/bin/cat (alice)            /root/file1.txt </code></pre><p> 普通用户修改密码： alice           /usr/bin/passwd (root)  /etc/shadow</p>
<a id="more"></a>
<h4 id="1-1-高级权限的类型"><a href="#1-1-高级权限的类型" class="headerlink" title="1.1.高级权限的类型"></a>1.1.高级权限的类型</h4><p> suid       4  : 可执行的文件搭配这个权限，便能得到特权，任意存取该文件的所有者能使用的全部系统资源。 </p>
<p>sgid        2   该文件就可以任意存取整个用户组所能使用的系统资源 </p>
<p>sticky     1   粘滞位   该位可以理解为防删除位. 设置sticky bit位后，就算用户对目录具有写权限，但也只能添加文件而不能删除文件。</p>
<h4 id="1-2-设置特殊权限"><a href="#1-2-设置特殊权限" class="headerlink" title="1.2.设置特殊权限"></a>1.2.设置特殊权限</h4><h5 id="a、字符"><a href="#a、字符" class="headerlink" title="a、字符"></a>a、字符</h5><p> chmod u+s file </p>
<p> chmod g+s dir </p>
<p> chmod o+t dir</p>
<h5 id="b、数字"><a href="#b、数字" class="headerlink" title="b、数字"></a>b、数字</h5><p>chmod 4777 file </p>
<p>chmod 7777 file </p>
<p>chmod 2770 dir </p>
<p>chmod 3770 dir</p>
<p>示例1：suid   普通用户通过suid提权     &lt;针对文件&gt; </p>
<p>在进程文件（二进制，可执行）上增加suid权限</p>
<p> [root@tianyun ~]# chmod u+s /usr/bin/cat</p>
<p> [root@tianyun ~]# chmod u+s /usr/bin/rm</p>
<p> [alice@tianyun ~]$ cat /root/file1.txt</p>
<p>==================================================</p>
<h4 id="1-3-普通用户可以修改密码："><a href="#1-3-普通用户可以修改密码：" class="headerlink" title="1.3.普通用户可以修改密码："></a>1.3.普通用户可以修改密码：</h4><p> alice           /usr/bin/passwd      /etc/shadow</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">  [alice@tianyun ~]$ ll /etc/shadow</span><br><span class="line"></span><br><span class="line"> ---------- 1 root root 1487 6月   4 13:43 /etc/shadow  </span><br><span class="line"> [alice@tianyun ~]$ ll /usr/bin/passwd </span><br><span class="line"></span><br><span class="line">-rwsr-xr-x. 1 root root 30768 2月  17 2012 /usr/bin/passwd</span><br><span class="line">// 之所以可以修改密码是因为多了  高级权限 SUID</span><br><span class="line">[alice@tianyun ~]$ passwd</span><br></pre></td></tr></table></figure>

<p>  更改用户 alice 的密码 。</p>
<p> 为 alice 更改 STRESS 密码。 </p>
<p>（当前）UNIX 密码：</p>
<p>  [root@tianyun ~]# ps aux |grep passwd </p>
<p>root      3674  0.0  0.0 165764  1884 pts/1    S+   14:34   0:00 passwd</p>
<p>=======================================================</p>
<h4 id="1-4-目前两种给普通用户提权手段："><a href="#1-4-目前两种给普通用户提权手段：" class="headerlink" title="1.4.目前两种给普通用户提权手段："></a>1.4.目前两种给普通用户提权手段：</h4><p>sudo: 了解，有针对性，例如针对某个用户以能够以root的身份执行某些命令。</p>
<p> suid: 基本针对所有用户，任何用户在执行有suid权限的程序时（例如/usr/bin/rm），都是以root身份在执行。</p>
<p>示例2：sticky 用户只能删除自己的文件  &lt;针对目录&gt;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# mkdir /home/dir100</span><br><span class="line">[root@tianyun ~]# chmod 777 /home/dir100</span><br><span class="line">测试：user1在/home/dir1建立文件, user2尝试删除！</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# chmod o+t /home/dir100  //添加sticky权限  </span><br><span class="line">     //设定后,目录中的用户只能删除、移动或改名 自己 的文件或目录  </span><br><span class="line">[root@tianyun ~]# ll -d /home/dir100  </span><br><span class="line">rwxrwxrwt 2 root root 4096 09-02 02:26 /home/dir1</span><br><span class="line">[alice@bogon ~]$ touch /home/dir100/alice.txt</span><br><span class="line">[zhong@bogon ~]$ touch /home/dir100/zhong.txt</span><br><span class="line">[alice@bogon ~]$ ll -l /home/dir100/</span><br><span class="line">-rw-rw-r--. 1 alice alice 0 Jul 28 19:52 alice.txt</span><br><span class="line">-rw-rw-r--. 1 zhong zhong 0 Jul 28 19:52 zhong.txt</span><br><span class="line">[alice@bogon ~]$ rm -rf /home/dir100/zhong.txt </span><br><span class="line">rm: cannot remove ‘/home/dir100/zhong.txt’: Operation not permitted</span><br><span class="line">[alice@bogon ~]$ cat /home/dir100/zhong.txt </span><br><span class="line">zhong test</span><br></pre></td></tr></table></figure>

<p>设置sticky权限后 谁可以删除：zhong.txt</p>
<p>​        root</p>
<p>​        文件的所有者 user: zhong </p>
<p>​        目录的所有者  : alice </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@bogon ~]# chown alice &#x2F;home&#x2F;dir100&#x2F;</span><br><span class="line">[root@bogon ~]# ll -d &#x2F;home&#x2F;dir100&#x2F;</span><br><span class="line">drwxrwxrwt. 2 alice root 40 Jul 28 19:52 &#x2F;home&#x2F;dir100&#x2F;</span><br><span class="line">[alice@bogon ~]$ rm - rf &#x2F;home&#x2F;dir100&#x2F;zhong.txt</span><br></pre></td></tr></table></figure>

<p>示例3：sgid 新建文件继承目录属组   &lt;针对目录&gt;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# mkdir /home/hr</span><br><span class="line">[root@tianyun ~]# chgrp hr /home/hr/</span><br><span class="line">[root@tianyun ~]# chmod g+s /	home/hr</span><br><span class="line">[root@tianyun ~]# ll -d /home/hr/</span><br><span class="line">drwxr-sr-x. 2 root hr 4096 Dec  5 16:03 /home/hr/</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# touch /home/hr/file9</span><br><span class="line">[root@tianyun ~]# ll /home/hr/</span><br><span class="line">-rw-r--r--. 1 root hr   0 Dec  5 16:03 file9</span><br></pre></td></tr></table></figure>



<p>====================================================</p>
<p>小知识：注意以下目录的正确权限，否则会导致程序不能正常运行 [root@wangcy ~]# ll -d /tmp /var/tmp/</p>
<p> drwxrwxrwt 14 root root 4096 07-26 10:15 /tmp drwxrwxrwt  2 root root 4096 07-24 19:02 /var/tmp/HTML&gt;</p>
<ol>
<li><h5 id="作用范围及功能"><a href="#作用范围及功能" class="headerlink" title="作用范围及功能:"></a>作用范围及功能:</h5></li>
<li><ol>
<li><p>SUID:作用于文件(二进制程序)</p>
<p> . ​    此用户将继承此程序的所有者权限</p>
</li>
</ol>
</li>
<li><p>SGID:作用于文件(二进制程序)和目录</p>
<p>. ​        对于文件:        </p>
<p>. 1. ​    此用户将继承此程序的所属组权限.</p>
<ol start="2">
<li><p>对于目录:</p>
<p>.     此文件夹下所有用户新建文件都自动继承此目录的用户组.</p>
</li>
</ol>
</li>
<li><p>Sticky:作用于目录</p>
<p>​        设定后,目录中的用户只能删除、移动或改名 <strong>自己</strong> 的文件或目录</p>
</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>目录</th>
<th>文件</th>
</tr>
</thead>
<tbody><tr>
<td>suid</td>
<td></td>
<td>以所有者身份执行</td>
</tr>
<tr>
<td>sgid</td>
<td>继承属组</td>
<td>以所有组的身份执行</td>
</tr>
<tr>
<td>sticky</td>
<td>用户只能删除自己的文件</td>
<td></td>
</tr>
</tbody></table>
<p><strong>例如：</strong></p>
<p>配置共享目录/share,要求所有用户都可以在共享目录内创</p>
<p>建文件,但不能修改或删除其他人的文件,并且所有用户创建</p>
<p>的文件属组都是IT<br>             SUID:4   SGID：2   Sticky:  1<br>     mkdir /share<br>    chmod  3777 /share<br>    groupadd IT</p>
<p>====================================================</p>
<h3 id="二-文件属性-chattr【拓展】"><a href="#二-文件属性-chattr【拓展】" class="headerlink" title="二.文件属性 chattr【拓展】"></a>二.文件属性 chattr【拓展】</h3><p>文件权限管理之： 文件属性</p>
<h4 id="2-1-文件属性添加与查看"><a href="#2-1-文件属性添加与查看" class="headerlink" title="2.1. 文件属性添加与查看"></a>2.1. 文件属性添加与查看</h4><p> 注：设置文件属性(权限)，针对所有用户，包括root</p>
<p>唯一可以限制 root 操作  </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# touch file100 file200 file300 </span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# lsattr file100 file200 file300</span><br></pre></td></tr></table></figure>

<p> ————-e- file100 </p>
<p>————-e- file200</p>
<p> ————-e- file300</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# man chattr</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# chattr +a file100 </span><br><span class="line">[root@tianyun ~]# chattr +i file200 </span><br><span class="line">[root@tianyun ~]# chattr +A file300</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# lsattr file100 file200 file300</span><br><span class="line"></span><br><span class="line">  -----a-------e- file100     a append（只追加 &gt;&gt;，不可删除）</span><br><span class="line"></span><br><span class="line"> ----i--------e- file200      i 不能被删除不可修改(防止root误删)</span><br><span class="line"></span><br><span class="line"> -------A-----e- file300      A(可追加&gt;&gt;-覆盖内容&gt; 可删除)</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# echo 111 &gt; file100			     //以覆盖的方式写入</span><br><span class="line"></span><br><span class="line">bash: file100: Operation not permitted</span><br><span class="line">[root@tianyun ~]# rm -rf file100 </span><br><span class="line">rm: cannot remove `file100': Operation not permitted</span><br><span class="line">[root@tianyun ~]# echo 111 &gt;&gt; file100			    //以追加的方式写入，例如日志文件</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# echo 111 &gt; file200</span><br><span class="line">bash: file200: Permission denied</span><br><span class="line">[root@instructor ~]# echo 111 &gt;&gt; file200</span><br><span class="line">bash: file200: Permission denied</span><br><span class="line">[root@tianyun ~]# rm -rf file200 </span><br><span class="line">rm: cannot remove `file200': Operation not permitted</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# chattr -a file100</span><br><span class="line">[root@tianyun ~]# chattr -i file200</span><br><span class="line">[root@tianyun ~]# chattr -A file300</span><br></pre></td></tr></table></figure>

<p>=====================================================</p>
<h3 id="三-进程掩码umask-拓展"><a href="#三-进程掩码umask-拓展" class="headerlink" title="三.进程掩码umask[拓展]"></a>三.进程掩码umask[拓展]</h3><p>文件权限管理之： 进程umask</p>
<p> <strong>进程</strong>   新建文件、目录的默认权限会受到umask的影响，umask表示要减掉的权限  </p>
<p>shell （vim,touch）      =======umask======&gt;    新文件或目录权限 vsftpd                         =======umask======&gt;    新文件或目录权限  samba                        =======umask======&gt;    新文件或目录权限  useradd                      =======umask======&gt;    用户HOME </p>
<p>示例1: 在shell进程中创建文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# umask 			                        //查看当前用户的umask权限</span><br><span class="line">0022 //--- -w- -w-</span><br><span class="line">[root@tianyun ~]# touch file800</span><br><span class="line">[root@tianyun ~]# mkdir dir800</span><br><span class="line">[root@tianyun ~]# ll -d dir800 file800 </span><br><span class="line">drwxr-xr-x. 2 root root 4096 3月  11 19:40 dir800  //755</span><br><span class="line">-rw-r--r--. 1 root root    0 3月  11 19:40 file800 //644</span><br></pre></td></tr></table></figure>

<p>示例2：修改shell umask值（临时）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">oot@tianyun ~]# umask 000</span><br><span class="line">[root@tianyun ~]# mkdir dir900</span><br><span class="line">[root@tianyun ~]# touch file900</span><br><span class="line">[root@tianyun ~]# ll -d dir900 file900 </span><br><span class="line">drwxrwxrwx. 2 root root 4096 3月  11 19:44 dir900</span><br><span class="line">-rw-rw-rw-. 1 root root    0 3月  11 19:44 file900</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">示例3：修改shell umask值（永久 建议不要）</span><br><span class="line">[root@tianyun ~]# vim /etc/profile   </span><br><span class="line">if [ $UID -gt 199 ] &amp;&amp; [ "`id -gn`" = "`id -un`" ]; then</span><br><span class="line">    umask 002</span><br><span class="line">else</span><br><span class="line">    umask 022</span><br><span class="line">fi</span><br><span class="line">[root@tianyun ~]# source /etc/profile       //立即在当前shell中生效</span><br></pre></td></tr></table></figure>

<p>示例4：通过umask决定新建用户HOME目录的权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# vim /etc/login.defs </span><br><span class="line">UMASK           077</span><br><span class="line">[root@tianyun ~]# useradd gougou</span><br><span class="line">[root@tianyun ~]# ll -d /home/gougou/</span><br><span class="line">drwx------. 4 gougou gougou 4096 3月  11 19:50 /home/gougou/</span><br><span class="line"></span><br><span class="line">[root@tianyun ~]# vim /etc/login.defs</span><br><span class="line">UMASK           000</span><br><span class="line">[root@tianyun ~]# useradd yangyang</span><br><span class="line">[root@tianyun ~]# ll -d /home/yangyang/</span><br><span class="line">drwxrwxrwx. 4 yangyang yangyang 4096 3月  11 19:53 /home/yangyang/</span><br></pre></td></tr></table></figure>

<p>示例5：例如vsftpd进程 /etc/vsftpd/vsftpd.conf 【了解】</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@tianyun ~]# yum -y install vsftpd</span><br><span class="line">[root@tianyun ~]# man vsftpd.conf</span><br><span class="line">anon_umask</span><br><span class="line">local_umask</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Linux</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>1、文件权限</title>
    <url>/2019/07/19/Linux_file_permission/</url>
    <content><![CDATA[<h3 id="文件权限-Ⅰ"><a href="#文件权限-Ⅰ" class="headerlink" title="文件权限 Ⅰ"></a>文件权限 Ⅰ</h3><h4 id="1-基本权限-UGO"><a href="#1-基本权限-UGO" class="headerlink" title="1.基本权限 UGO"></a>1.基本权限 UGO</h4><p>ls –l    查看文件或目录的权限</p>
<p>umask   查看或设置权限遮罩（即实际权限=最大权限-遮罩值）</p>
<p>chmod   改变文件或目录的权限</p>
<p>chown   更改文件或目录的所有者</p>
<a id="more"></a>
<p>chgrp    更改文件或目录的所属组</p>
<p>getfacl   获取文件或目录权限访问控制列表</p>
<p>setfacl   设置文件或目录权限访问控制列表</p>
<p>=====================================================</p>
<p>权限对象： </p>
<p>属主：          u</p>
<p> 属组：         g</p>
<p> 其他人:          o </p>
<p> 基本权限类型： </p>
<p>读：r             4</p>
<p> 写：w        2 </p>
<p>执行: x        1</p>
<p>rwx                   rw-               r–                     alice         hr            file1.txt</p>
<p>属主权限        属组权限      其他人权限      属主        属组</p>
<p>一、  alice对file1.txt文件有什么权限？</p>
<p>​      a. alice是所有者，有rwx权限</p>
<p>二  、jack对file1.txt文件有什么权限？ 前提：jack属于hr组</p>
<p>a. jack是所有者吗？ </p>
<p>b. jack属于hr组， 有rw权限</p>
<p>三 tom对file1.txt文件有什么权限？ </p>
<p>a. tom是所有者吗？</p>
<p> b. tom属于hr组吗？</p>
<p>  c. tom为其他人，只有 r 权限 </p>
<h5 id="1-1-设置权限"><a href="#1-1-设置权限" class="headerlink" title="1.1.设置权限"></a>1.1.设置权限</h5><p>更改文件的属主、属组  </p>
<h6 id="chown-更改文件或目录的所有者"><a href="#chown-更改文件或目录的所有者" class="headerlink" title="chown   更改文件或目录的所有者"></a>chown   更改文件或目录的所有者</h6><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# chown alice.hr file1          //改属主、属组</span><br><span class="line">[root@jason ~]# chown alice     file1 	        //只改属主</span><br><span class="line">[root@jason ~]# chown        .hr file1	       //只改属组</span><br><span class="line">[root@jason ~]# chown -R zhouchen.hr dir1   R(递归) 操作文件和目录</span><br></pre></td></tr></table></figure>

<h6 id="chgrp：更改文件或目录的所属组"><a href="#chgrp：更改文件或目录的所属组" class="headerlink" title="chgrp：更改文件或目录的所属组"></a>chgrp：更改文件或目录的所属组</h6><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# chgrp it file1			 //改文件属组 </span><br><span class="line"></span><br><span class="line">[root@jason ~]# chgrp -R it dir1			   //改文件属组</span><br></pre></td></tr></table></figure>



<h5 id="1-2-更改权限"><a href="#1-2-更改权限" class="headerlink" title="1.2.更改权限"></a>1.2.更改权限</h5><h6 id="a-使用符号"><a href="#a-使用符号" class="headerlink" title="a. 使用符号"></a>a. 使用符号</h6><p>​            对象        赋值符        权限类型     </p>
<p>​                         u                       +                         r</p>
<p>chmod             g                        -                          w              file1</p>
<p>​                         o                        =                          x </p>
<p>​                         a</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# chmod u+x file1	      //属主增加执行</span><br><span class="line"></span><br><span class="line">[root@jason ~]# chmod a=rwx file1	     //所有人等于读写执行</span><br><span class="line">[root@jason ~]# chmod a=- file1	      //所有人没有权限</span><br><span class="line">[root@jason ~]# chmod ug=rw,o=r file1     //属主属组等于读写，其他人只读</span><br><span class="line">[root@jason ~]# ll file1 			      //以长模式方式查看文件权限</span><br><span class="line">-rw-rw-r-- 1 alice it 17 10-25 16:45 file1	    //显示的结果</span><br></pre></td></tr></table></figure>



<h6 id="b-使用数字"><a href="#b-使用数字" class="headerlink" title="b.使用数字"></a>b.使用数字</h6><p>[</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@jason ~]# chmod 644 file1</span><br><span class="line"></span><br><span class="line"> [root@jason ~]# ll file1</span><br><span class="line"></span><br><span class="line"> -rw-r--r-- 1 alice it 17 10-25 16:45 file11</span><br></pre></td></tr></table></figure>

<p><img src="image%5C%E6%9D%83%E9%99%901.png" alt=""></p>
<p><img src="image%5C%E6%9D%83%E9%99%903.png" alt=""></p>
<h4 id="2-权限案例-UGO"><a href="#2-权限案例-UGO" class="headerlink" title="2 .权限案例 UGO"></a>2 .权限案例 UGO</h4><p>======================================================</p>
<h5 id="2-1-设置权限案例"><a href="#2-1-设置权限案例" class="headerlink" title="2.1.设置权限案例"></a>2.1.设置权限案例</h5><p>针对hr部门的访问目录/home/hr设置权限，要求如下:</p>
<ol>
<li><p>root用户和hr组的员工可以读、写、执行</p>
</li>
<li><p>其他用户没有任何权限</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# groupadd hr</span><br><span class="line">[root@jason ~]# useradd hr01 -G hr</span><br><span class="line">[root@jason ~]# useradd hr02 -G hr</span><br><span class="line">[root@jason ~]# mkdir /home/hr</span><br><span class="line"></span><br><span class="line">[root@jason ~]# chgrp hr /home/hr</span><br><span class="line"></span><br><span class="line"> [root@jason ~]# chmod 770 /home/hr </span><br><span class="line"></span><br><span class="line">[root@jason ~]# ll -d /home/hr/</span><br><span class="line"></span><br><span class="line"> drwxrwx---. 2 root hr 4096 3月  13 14:26 /home/hr/</span><br></pre></td></tr></table></figure>

<p><strong>**</strong>重要： r、w、x权限对文件和目录的意义</p>
<p><img src="image%5C%E6%9D%83%E9%99%904.png" alt=""></p>
<h5 id="2-2-rwx对文件的影响"><a href="#2-2-rwx对文件的影响" class="headerlink" title="2.2.rwx对文件的影响"></a>2.2.rwx对文件的影响</h5><p>实战案例1：rwx对文件的影响</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# vim /home/file1</span><br><span class="line"></span><br><span class="line">date</span><br><span class="line"></span><br><span class="line">[root@jason ~]# ll /home/file1</span><br><span class="line"></span><br><span class="line"> -rw-r--r-- 1 root root 5 7月  26 14:43 /home/file1</span><br><span class="line"></span><br><span class="line"> [root@jason ~]# chmod o+x /home/file1</span><br><span class="line"></span><br><span class="line"> [root@jason ~]# chmod o+w /home/file1</span><br><span class="line"></span><br><span class="line">[root@jason ~]# su - alice</span><br><span class="line"></span><br><span class="line">[alice@jason ~]$ cat /home/file1          //测试读</span><br><span class="line"></span><br><span class="line">[alice@jason ~]$ /home/file1               //测试执行</span><br><span class="line">-bash: /home/file1: 权限不够</span><br><span class="line">[alice@jason ~]$ /home/file1</span><br><span class="line">2017年 07月 26日 星期三 14:46:29 CST</span><br><span class="line"></span><br><span class="line">[alice@jason ~]$ vim /home/file1         //测试写</span><br><span class="line">date</span><br><span class="line">ls</span><br></pre></td></tr></table></figure>

<h5 id="2-3-rwx对目录的影响"><a href="#2-3-rwx对目录的影响" class="headerlink" title="2.3.rwx对目录的影响"></a>2.3.rwx对目录的影响</h5><p>实战案例2：对目录没有w，对文件有rwx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# mkdir /dir10</span><br><span class="line">[root@jason ~]# touch /dir10/file1</span><br><span class="line">[root@jason ~]# chmod 777 /dir10/file1 </span><br><span class="line"></span><br><span class="line">[root@jason ~]# ll -d /dir10/</span><br><span class="line">drwxr-xr-x. 2 root root 4096 3月  11 18:37 /dir10/</span><br><span class="line">[root@jason ~]# ll /dir10/file1 </span><br><span class="line">-rwxrwxrwx. 1 root root 0 3月  11 18:37 /dir10/file1</span><br><span class="line"></span><br><span class="line">[alice@jason ~]$ cat /dir10/file1 </span><br><span class="line">[alice@jason ~]$ rm -rf /dir10/file1 </span><br><span class="line">rm: 无法删除"/dir10/file1": 权限不够</span><br></pre></td></tr></table></figure>



<p>实战案例3：对目录有w，对文件没有任何权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# chmod 777 /dir10/</span><br><span class="line">[root@jason ~]# chmod 000 /dir10/file1 </span><br><span class="line">[root@jason ~]# ll -d /dir10/</span><br><span class="line">drwxrwxrwx. 2 root root 4096 3月  11 18:37 /dir10/</span><br><span class="line">[root@jason ~]# ll /dir10/file1 </span><br><span class="line">----------. 1 root root 0 3月  11 18:37 /dir10/file1</span><br><span class="line"></span><br><span class="line">[alice@jason ~]$ cat /dir10/file1 </span><br><span class="line">cat: /dir10/file1: 权限不够</span><br><span class="line">[alice@jason ~]$ rm -rf /dir10/file1 </span><br><span class="line">[alice@jason ~]$ touch /dir10/file2</span><br></pre></td></tr></table></figure>

<p>小结</p>
<p> <strong>对目录有w权限，可以在目录中创建新文件，可以删除目录中的文件（跟文件权限无关）</strong>即使文件有777权限 目录没有w 用户依然不能删除，如果目录有w权限，文件即使000权限都可以删除</p>
<p> 注意事项</p>
<p> 文件： x 权限小心给予</p>
<p>目录： w 权限小心给予</p>
<p>再次认识一下文件和目录：</p>
<p><img src="image%5C%E6%9D%83%E9%99%905.png" alt=""></p>
<h4 id="3-基本权限ACL"><a href="#3-基本权限ACL" class="headerlink" title="3. 基本权限ACL"></a>3. 基本权限ACL</h4><p>====================================================</p>
<p>文件权限管理之： </p>
<p>UGO设置基本权限：  只能一个用户，一个组和其他人 </p>
<p>ACL 设置基本权限：  r,w,x</p>
<h6 id="getfacl-：-获取文件或目录权限访问控制列表"><a href="#getfacl-：-获取文件或目录权限访问控制列表" class="headerlink" title="getfacl ： 获取文件或目录权限访问控制列表"></a>getfacl ： 获取文件或目录权限访问控制列表</h6><h6 id="setfacl-：-设置文件或目录权限访问控制列表"><a href="#setfacl-：-设置文件或目录权限访问控制列表" class="headerlink" title="setfacl ：  设置文件或目录权限访问控制列表"></a>setfacl ：  设置文件或目录权限访问控制列表</h6><h5 id="3-1-ACL基本用法"><a href="#3-1-ACL基本用法" class="headerlink" title="3.1.ACL基本用法"></a>3.1.ACL基本用法</h5><p>设置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# touch /tmp/a</span><br><span class="line">[root@jason ~]# ll /tmp/a</span><br><span class="line">-rw-r--r--. 1 root root     0 Jul 27 16:14 a</span><br><span class="line">[root@jason ~]# getfacl /tmp/a</span><br><span class="line"><span class="meta">#</span><span class="bash"> file: tmp/a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> owner: root</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::r--</span><br><span class="line">[zhong@jason ~]$ echo '1111' &gt;&gt; /tmp/a</span><br><span class="line">-bash: /tmp/a: Permission denied</span><br><span class="line">[root@jason ~]# setfacl -m u:zhong:rw /tmp/a</span><br><span class="line">//增加用户alice权限</span><br><span class="line">[zhong@jason ~]$ echo '123' &gt;&gt; /tmp/a</span><br><span class="line">[zhong@jason ~]$ cat /tmp/a</span><br><span class="line">sdadsad</span><br><span class="line">123</span><br><span class="line">[zhong@jason ~]$ rm -rf /tmp/a</span><br><span class="line">rm: cannot remove ‘/tmp/a’: Operation not permitted  //没有X权限</span><br><span class="line">[root@jason ~]# setfacl -m u:zhang:- /tmp/a</span><br><span class="line">[root@jason ~]# su - zhang</span><br><span class="line">[zhang@jason ~]$ cat /tmp/a</span><br><span class="line">cat: /tmp/a: Permission denied</span><br><span class="line">//增加用户jack权限</span><br><span class="line">[root@jason ~]# setfacl -m o::rw /tmp/a</span><br><span class="line">-rw-rw-rw-+ 1 root root 0 Jul 20 10:21 /home/test.txt</span><br><span class="line">[li@jason ~]$ cat /tmp/a</span><br><span class="line">sdadsad</span><br><span class="line">123</span><br><span class="line">[li@jason ~]$ echo '213123' &gt;&gt; /tmp/a</span><br><span class="line"></span><br><span class="line">//即使给‘zhong’ rwx 权限 还是无法提权 和删除 </span><br><span class="line">[root@jason ~]# setfacl -m u:zhong:rwx /tmp/a</span><br><span class="line">[zhong@jason ~]$ chown zhong /tmp/a</span><br><span class="line">chown: changing ownership of ‘/tmp/a’: Operation not permitted</span><br></pre></td></tr></table></figure>

<h5 id="3-2-查看-删除："><a href="#3-2-查看-删除：" class="headerlink" title="3.2.查看/删除："></a>3.2.查看/删除：</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# ll /home/test.txt </span><br><span class="line">-rw-rw-r--+ 1 root root 0 10-26 13:59 /home/test.txt</span><br><span class="line">[root@jason ~]# getfacl /home/test.txt</span><br><span class="line"></span><br><span class="line">[root@jason ~]# setfacl -m g:hr:r /home/test.txt</span><br><span class="line">[root@jason ~]# setfacl -x g:hr /home/test.txt	 			    //删除组hr的acl权限</span><br><span class="line">[root@jason ~]# setfacl -b /home/test.txt 		 				//删除所有acl权限</span><br></pre></td></tr></table></figure>

<h5 id="3-2-查看帮助"><a href="#3-2-查看帮助" class="headerlink" title="3.2.查看帮助"></a>3.2.查看帮助</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> [root@jason ~]# man setfacl /EXAMPLES </span><br><span class="line"></span><br><span class="line">[root@jason ~]#  getfacl file1 |setfacl  --set-file=- file2       //复制file1的ACL权限给file2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@jason ~]# chmod a-x /usr/bin/chmod       如何添加x权限？？？</span><br></pre></td></tr></table></figure>

<h5 id="3-3ALC高级特性"><a href="#3-3ALC高级特性" class="headerlink" title="3.3ALC高级特性"></a>3.3ALC高级特性</h5><p>mask:<br>用于临时降低用户或组（除属主和其他人）的权限<br>mask决定了他们的最高权限<br>建议：为了方便管理文件权限，其他人的权限设置为空</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@huanan home]# setfacl -m u:jason:rw,u:jack:r file1 </span><br><span class="line">[root@huanan home]# getfacl file1 </span><br><span class="line"># file: file1</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:jason:rw-</span><br><span class="line">user:jack:r--</span><br><span class="line">group::r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>



<p>问题：<br>chmod a-x /usr/bin/chmod<br>怎么把chmod权限加回去</p>
<p>setfacl -m u:root:rwx /usr/bin/chmod<br>chmod a+x /usr/bin/chmod<br>setfacl -b /usr/bin/chmod</p>
<hr>
<p>chmod u-x /usr/bin/chmod      X<br>chmod a+x /usr/bin/chmod   </p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>2.Linux文件系统管理</title>
    <url>/2019/07/18/Linux_file_manager/</url>
    <content><![CDATA[<h3 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h3><h4 id="1-Linux目录结构"><a href="#1-Linux目录结构" class="headerlink" title="1.Linux目录结构"></a>1.Linux目录结构</h4><h5 id="1-1-WINDOWS-LINUX-对比"><a href="#1-1-WINDOWS-LINUX-对比" class="headerlink" title="1.1 WINDOWS/LINUX 对比"></a><strong>1.1 WINDOWS/LINUX 对比</strong></h5><p>Windows: 以多根的方式组织文件 C:\ D:\ E:<br>Linux: 以单根的方式组织文件 /</p>
<h5 id="1-2-简介"><a href="#1-2-简介" class="headerlink" title="1.2 简介"></a><strong>1.2 简介</strong></h5><a id="more"></a>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/目录结构： FSH (Filesystem Hierarchy Standard)</span><br><span class="line">[root@jason ~]# ls /</span><br><span class="line">bin dev lib media net root srv usr</span><br><span class="line">boot etc lib64 misc opt sbin sys var</span><br><span class="line">cgroup home lost+found mnt proc selinux tmp</span><br></pre></td></tr></table></figure>



<h5 id="1-3-图示"><a href="#1-3-图示" class="headerlink" title="1.3 图示"></a><strong>1.3 图示</strong></h5><p><img src="image/1.png" alt="1"></p>
<h5 id="1-4-目录功能"><a href="#1-4-目录功能" class="headerlink" title="1.4 目录功能"></a><strong>1.4 目录功能</strong></h5><p> [root@jason ~]# yum -y install tree</p>
<p>[root@jason ~]# tree / -L 1    //查看根目录下文件</p>
<p>bin 普通用户使用的命令 /bin/ls, /bin/date<br>sbin 管理员使用的命令 /sbin/service<br>dev 设备文件 /dev/sda,/dev/sda1<br>root root用户的HOME<br>home 存储普通用户家目录<br>lost+found fsck修复时，存储没有链接的文件或目录<br>proc 虚拟的文件系统，反映出来的是内核，进程信息或实时状态 </p>
<p>usr 系统文件，相当于C:\Windows<br>/usr/local 软件安装的目录，相当于C:\Program </p>
<p>boot 存放的系统启动相关的文件，例如kernel,grub(引导装载程序)<br>etc 配置文件（系统相关如网络/etc/sysconfig/network</p>
<p>lib 库文件Glibc<br>lib64 库文件Glibc</p>
<p>tmp 临时文件(全局可写：进程产生的临时文件)<br>var 存放的是一些变化文件，比如数据库，日志，邮件….</p>
<p>==设备（主要指存储设备）挂载目录==</p>
<p>media 移动设备默认的挂载点<br>mnt 手工挂载设备的挂载点</p>
<h4 id="2-文件管理"><a href="#2-文件管理" class="headerlink" title="2.文件管理"></a>2.文件管理</h4><h5 id="2-1-文件类型（理解）"><a href="#2-1-文件类型（理解）" class="headerlink" title="2.1 文件类型（理解）"></a>2.1 文件类型（理解）</h5><ul>
<li>普通文件（文本文件，二进制文件，压缩文件，电影，图片。。。）</li>
<li>d 目录文件（蓝色）</li>
<li>b 设备文件（块设备）存储设备硬盘，U盘 /dev/sda, /dev/sda1</li>
<li>c 设备文件（字符设备）打印机，终端 /dev/tty1</li>
<li>l 链接文件（淡蓝色）</li>
<li>s 套接字文件</li>
<li>p 管道文件</li>
</ul>
<h5 id="2-2示例1"><a href="#2-2示例1" class="headerlink" title="2.2示例1"></a>2.2示例1</h5><p>查看各式各样的文件类型。你能找出几种呢？</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# ll -d /etc/hosts /bin/ls /home /dev/sda /dev/tty1 /etc/grub2.cfg /dev/log /run/dmeventd-client</span><br><span class="line">-rwxr-xr-x. 1 root root 117616 Nov 20 2015 /bin/ls</span><br><span class="line">srw-rw-rw- 1 root root 0 Mar 14 2017 /dev/log</span><br><span class="line">brw-rw---- 1 root disk 8, 0 Mar 14 09:03 /dev/sda</span><br><span class="line">crw--w---- 1 root tty 4, 1 Mar 14 09:03 /dev/tty1</span><br><span class="line">lrwxrwxrwx. 1 root root 22 Dec 21 01:40 /etc/grub2.cfg -&gt; ../boot/grub2/grub.cfg</span><br><span class="line">-rw-r--r-- 1 root root 392 Feb 22 15:51 /etc/hosts</span><br><span class="line">drwxr-xr-x. 10 root root 4096 Mar 14 11:00 /home</span><br></pre></td></tr></table></figure>



<h5 id="2-3-示例2"><a href="#2-3-示例2" class="headerlink" title="2.3 示例2"></a><strong>2.3 示例2</strong></h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]$ file /etc/hosts</span><br><span class="line">/etc/hosts: ASCII text</span><br><span class="line"></span><br><span class="line">root@jason ~]$ file /bin/ls</span><br><span class="line">/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=aa7ff68f13de25936a098016243ce57c3c982e06, stripped</span><br><span class="line"></span><br><span class="line">[root@jason ~]$ file /dev/sda</span><br><span class="line">/dev/sda: block special</span><br><span class="line"></span><br><span class="line">[root@jason ~]$ file /dev/tty1</span><br><span class="line">/dev/tty1: character special</span><br><span class="line"></span><br><span class="line">[root@jason ~]$ file /etc/grub2.cfg </span><br><span class="line">/etc/grub2.cfg: broken symbolic link to `../boot/grub2/grub.cfg'</span><br><span class="line"></span><br><span class="line">[root@jason ~]$ file /home</span><br><span class="line">/home: directory</span><br><span class="line"></span><br><span class="line">[root@jason ~]$ file /run/dmeventd-client </span><br><span class="line">/run/dmeventd-client: fifo (named pipe)</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>通过颜色判断文件的类型是不一定正确的！！！<br>Linux系统中文件是没有扩展名！！！</p>
<h4 id="3-文件管理命令"><a href="#3-文件管理命令" class="headerlink" title="3.文件管理命令"></a>3.文件管理命令</h4><h5 id="3-1-改变目录"><a href="#3-1-改变目录" class="headerlink" title="3.1  改变目录"></a><strong>3.1  改变目录</strong></h5><p>cd     绝对路径 cd /home/alice</p>
<p>cd     相对路径 cd .  ..</p>
<p>cd     专用：</p>
<p>cd -     返回上次目录 </p>
<p>cd     直接回家</p>
<h5 id="2-2-创建文件"><a href="#2-2-创建文件" class="headerlink" title="2.2 创建文件"></a><strong>2.2 创建文件</strong></h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch file1.txt //无则创建，有则修改时间</span><br><span class="line"></span><br><span class="line">touch file3 file4</span><br><span class="line"></span><br><span class="line">touch /home/file10.txt</span><br><span class="line"></span><br><span class="line">touch /home/file5 file6</span><br><span class="line"></span><br><span class="line">touch /home/&#123;zhuzhu,gougou&#125;</span><br><span class="line"></span><br><span class="line">touch file&#123;1..20&#125;</span><br><span class="line"></span><br><span class="line">touch file&#123;a..c&#125;</span><br><span class="line"></span><br><span class="line">touch yang&#123;a,b,c&#125; //&#123;&#125;集合，等价touch yanga yangb yangc</span><br></pre></td></tr></table></figure>

<h5 id="2-3-创建目录"><a href="#2-3-创建目录" class="headerlink" title="2.3 创建目录"></a><strong>2.3 创建目录</strong></h5><p>语法：mkdir    -v 详细 -p 递归 目录 </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir dir1</span><br><span class="line"></span><br><span class="line">mkdir /home/dir2 /home/dir3</span><br><span class="line"></span><br><span class="line">mkdir /home/&#123;dir4,dir5&#125;</span><br><span class="line"></span><br><span class="line">mkdir -v /home/&#123;dir6,dir7&#125;		#显示详细信息，遍历</span><br><span class="line"></span><br><span class="line">mkdir -v /home/dir8/111/22</span><br><span class="line">mkdir /a/b/c/d (报错)  </span><br><span class="line">mkdir -pv /a/b/c/d</span><br><span class="line"></span><br><span class="line">mkdir -pv /home/dir8/111/222 #包括其父母的创建，不会有任何消息输出</span><br><span class="line"></span><br><span class="line">mkdir -pv /home/&#123;yang/&#123;dir1,111&#125;,jason&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-4-复制"><a href="#2-4-复制" class="headerlink" title="2.4.复制"></a><strong>2.4.复制</strong></h5><p>==复制 cp -r 目录 -v 详细 -f 强制   -n  静默</p>
<p>Usage: cp [OPTION]… [-T] SOURCE DEST</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd</span><br><span class="line"></span><br><span class="line">mkdir /home/dir&#123;1,2&#125;</span><br><span class="line"></span><br><span class="line">cp -v install.log /home/dir1	  //-v 显示详细信息</span><br><span class="line"></span><br><span class="line">cp -v install.log /home/</span><br><span class="line">dir1/yang.txt</span><br><span class="line"></span><br><span class="line">cp -rv /etc /home/dir1    //-r 拷贝文件夹</span><br><span class="line"></span><br><span class="line">cp  -rv  源文件1 源文件2 源文件N  目标文件 //将多个文件拷贝到同一个目录</span><br><span class="line"></span><br><span class="line">cp -rv /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/passwd /etc/grub.conf /etc/hosts .</span><br><span class="line"></span><br><span class="line">cp -r /etc /tmp</span><br><span class="line"></span><br><span class="line">cp -rfn /etc /tmp    //-f, --force 强制</span><br></pre></td></tr></table></figure>

<h5 id="2-5-移动"><a href="#2-5-移动" class="headerlink" title="2.5 移动"></a><strong>2.5 移动</strong></h5><p>1.创建一个新文件file1</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch  /root/file1</span><br></pre></td></tr></table></figure>

<p>2.把file1文件移动到/tmp目录中。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv    /root/file1    /tmp</span><br><span class="line">ls    /tmp/file1</span><br></pre></td></tr></table></figure>

<p>3.把file1文件更名为file2</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv    /tmp/file1     /tmp/file2</span><br></pre></td></tr></table></figure>

<p>4.观察file1文件已经更名为file2</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls  /tmp/file1    /tmp/file2</span><br></pre></td></tr></table></figure>

<h5 id="2-6-删除"><a href="#2-6-删除" class="headerlink" title="2.6 删除"></a><strong>2.6 删除</strong></h5><p>==删除 rm -r 递归 -f force强制 -v 详细过程     *通配符</p>
<p>示例1：删除/home/dir1 </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /home</span><br><span class="line"></span><br><span class="line">rm -rf dir1</span><br></pre></td></tr></table></figure>

<p>-r 递归<br>-f force强制<br>-v 详细过程</p>
<p>示例2：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">​&#96;&#96;&#96;shell</span><br><span class="line">[root@jason ~]# mkdir &#x2F;home&#x2F;dir10</span><br><span class="line">[root@jason ~]# touch &#x2F;home&#x2F;dir10&#x2F;&#123;file2,file3,.file4(隐藏文件)&#125;</span><br><span class="line">[root@jason ~]# rm -rf &#x2F;home&#x2F;dir10&#x2F;* &#x2F;&#x2F;不包括隐藏文件</span><br><span class="line">[root@jason ~]# ls &#x2F;home&#x2F;dir10&#x2F; -a</span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<p>. .. .file4（隐藏文件）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">示例3：</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;shell</span><br><span class="line">[root@jason ~]# rm -rf file*</span><br><span class="line">[root@jason ~]# rm -rf *.pdf</span><br></pre></td></tr></table></figure>

<h5 id="2-7-查看文件内容"><a href="#2-7-查看文件内容" class="headerlink" title="2.7 查看文件内容"></a><strong>2.7 查看文件内容</strong></h5><p>cat全部</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat  /etc/passwd</span><br></pre></td></tr></table></figure>

<p>-n 显示行号</p>
<p>-A 包括控制字符（换行符/制表符）</p>
<p>more翻页</p>
<p>less</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">more  /etc/passwd</span><br><span class="line">less /etc/passwd</span><br></pre></td></tr></table></figure>

<p>head头部</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# head /etc/passwd</span><br><span class="line">[root@jason ~]# head -2 /etc/passwd (输入前两行)</span><br></pre></td></tr></table></figure>

<p>tail尾部</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# tail /etc/passwd</span><br><span class="line">[root@jason ~]# tail -1 /etc/passwd（输出最后一行）</span><br><span class="line">[root@jason ~]# tail /var/log/messages</span><br><span class="line">[root@jason ~]# tail -20 /var/log/messages</span><br><span class="line">[root@jason ~]# tail -f /var/log/secure //-f 动态查看文件的尾部</span><br><span class="line">[root@jason ~]# tail -F /var/log/secure //-F 动态查看文件的尾部</span><br><span class="line">注：vim, gedit编辑文件时，索引号会改变</span><br></pre></td></tr></table></figure>

<p>grep过滤关键字    grep 针对文件内容进行过滤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grep 'root' /etc/passwd  root关键字</span><br><span class="line"></span><br><span class="line">grep '^root' /etc/passwd ^以root开头</span><br><span class="line"></span><br><span class="line">grep 'bash$' /etc/passwd $以bash结尾</span><br><span class="line"></span><br><span class="line">grep 'failure' /var/log/secure</span><br></pre></td></tr></table></figure>

<h5 id="2-8-修改文件内容"><a href="#2-8-修改文件内容" class="headerlink" title="2.8 修改文件内容"></a><strong>2.8 修改文件内容</strong></h5><p>VI 的三个模式</p>
<p><img src="image/1528092982235.png" alt="1528092982235"></p>
<p>命令模式</p>
<p>光标定位：</p>
<ul>
<li>hjkl                #上下左右<br>   0 / $            #行首行尾<br>   gg /G             #页首页尾</li>
<li>3G                   #进入第三行  </li>
<li>/string            #查找字符，n下一个    (n N 可以循环的)    </li>
</ul>
<p>文本编辑：</p>
<ul>
<li>文本编辑（少量）</li>
<li>y 复制 yy 3yy# ygg yG (以行为单位)</li>
<li>d 删除 dd 3dd（删除光标后三行） dgg（删除光标前） dG (删除光标后) </li>
<li>p 粘贴</li>
<li>x 删除光标所在的字符</li>
<li>D 从光标处删除到行尾</li>
<li>u undo撤销</li>
<li>^r redo重做</li>
<li>r 可以用来修改一个字符</li>
</ul>
<p>进入其它模式：</p>
<ul>
<li><p>a 进入插入模式</p>
</li>
<li><p>i 进入插入模式</p>
</li>
<li><p>o 进入插入模式</p>
</li>
<li><p>A 进入插入模式</p>
</li>
</ul>
<ul>
<li><p>: 进入末行模式（扩展命令模式）</p>
</li>
<li><p>v 进入可视模式</p>
</li>
<li><p>^v 进入可视块模式</p>
</li>
<li><p>V 进入可视行模式</p>
</li>
<li><p>R 进入替换模式</p>
</li>
</ul>
<p>扩展命令模式：</p>
<p>保存退出</p>
<ul>
<li><p>:10 进入第10行 </p>
</li>
<li><p>:w 保存 </p>
</li>
<li><p>:q 退出 </p>
</li>
<li><p>:wq 保存并退出 </p>
</li>
<li><p>:w! 强制保存 </p>
</li>
<li><p>:q! 不保存并退出 </p>
</li>
<li><p>:wq! 强制保存退出</p>
</li>
<li><p>:x 保存并退出 ZZ</p>
</li>
</ul>
<p>查找替换</p>
<ul>
<li><p>:范围 s/old/new/选项 </p>
</li>
<li><p>:1,5 s/root/yang/g         从1－5行的root 替换为yang </p>
</li>
</ul>
<p>读入文件/写文件(另存为)</p>
<ul>
<li>:w 存储到当前文件</li>
<li>:w /tmp/aaa.txt 另存为/tmp/aaa.txt      //另存</li>
<li>:1,3 w /tmp/2.txt     // 1–3行 另存到 </li>
<li>:r /etc/hosts 读入文件到当前行后</li>
<li>:5 r /etc/hosts 读入文件到第5行后</li>
</ul>
<p>设置环境 (临时)： </p>
<ul>
<li><p>:set nu 设置行号 </p>
</li>
<li><p>:set ic 不区分大小写</p>
</li>
<li><p>:set ai 自动缩进</p>
</li>
<li><p>:set list 显示控制字符</p>
</li>
<li><p>:set nonu 取消设置行号 </p>
</li>
<li><p>:set noic</p>
</li>
</ul>
<h5 id="2-9-文件基本信息："><a href="#2-9-文件基本信息：" class="headerlink" title="2.9 文件基本信息："></a>2.9 文件基本信息：</h5><p><strong>时间类型</strong></p>
<p>访问时间：atime，查看内容 //RHEL6会延后修改atime<br>修改时间：mtime，修改内容<br>改变时间：ctime，文件属性，比如权限<br>删除时间：dtime，文件 被删除的时间</p>
<p><strong>查询示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# ls -l install.log</span><br><span class="line">-rw-r--r-- 1 root root 34793 10-23 13:49 install.log</span><br><span class="line"></span><br><span class="line">[root@jason ~]# stat install.log</span><br><span class="line">File: “install.log”</span><br><span class="line">Size: 34793 Blocks: 80 IO Block: 4096 一般文件</span><br><span class="line">Device: 802h/2050d Inode: 65282 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Access: 2012-10-23 16:53:20.000000000 +0800</span><br><span class="line">Modify: 2012-10-23 13:49:46.000000000 +0800</span><br><span class="line">Change: 2012-10-23 13:49:52.000000000 +0800</span><br></pre></td></tr></table></figure>

<p>ls -l 文件名 仅看的是文件的修改时间</p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>1.Linux用户管理</title>
    <url>/2019/07/17/Linux_user_manager/</url>
    <content><![CDATA[<h4 id="1-用户概览"><a href="#1-用户概览" class="headerlink" title="1 用户概览"></a>1 用户概览</h4><h5 id="1-1-用户-组基本概念"><a href="#1-1-用户-组基本概念" class="headerlink" title="1.1. 用户/组基本概念!"></a>1.1. 用户/组基本概念!</h5><p>====================================================</p>
<p>Users and groups：</p>
<p> . Every process (running program) on the system runs as a particular user.</p>
<a id="more"></a>
<p>系统上的每个进程（运行的程序）都是作为特定用户运行的</p>
<p>. Every file is owned by a particular user. </p>
<p>每个文件是由一个特定的用户拥有 . Access to files and directories are restricted by user. </p>
<p>访问文件和目录受到用户的限制 </p>
<p> . The user associated with a running process determines the files and directories accessible to that process. </p>
<p>  与正在运行的进程相关联的用户确定该进程可访问的文件和目录</p>
<p>#######################################################</p>
<p><strong>shell 是用户登录后运行的第一个程序</strong></p>
<p>/sbin/nologin   用户无法登录系统，实现管理。仅作为运行进程的用户，访问FTP的用户，安全的用户</p>
<p>/bin/bash  登录系统，实现管理</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">过滤可登录账户</span><br><span class="line">[root@smile ~]# grep &#39;bash$&#39; &#x2F;etc&#x2F;passwd</span><br><span class="line">root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash</span><br><span class="line">zhang:x:1000:1000::&#x2F;home&#x2F;zhang:&#x2F;bin&#x2F;bash</span><br><span class="line">zhong:x:1001:1001::&#x2F;home&#x2F;zhong:&#x2F;bin&#x2F;bash</span><br><span class="line">过滤不可登录用户</span><br><span class="line">[root@smile ~]# grep &#39;nologin$&#39; &#x2F;etc&#x2F;passwd</span><br><span class="line">bin:x:1:1:bin:&#x2F;bin:&#x2F;sbin&#x2F;nologin</span><br></pre></td></tr></table></figure>



<h4 id="2-用户管理"><a href="#2-用户管理" class="headerlink" title="2 用户管理"></a>2 用户管理</h4><p>=======================================================</p>
<p>groupadd,groupdel useradd,usermod,userdel passwd,chage</p>
<ul>
<li><p>Options:<br>  -b, –base-dir BASE_DIR       指定创建用户HOME目录的位置，一般结合 –D 使用<br>  -c, –comment COMMENT         给新用户添加备注<br>  -d, –home-dir HOME_DIR       指定用户家目录的文件名<br>  -D, –defaults                用来查看创建账户时的默认值，也就是/etc/default/useradd文件中的内容<br>  -e, –expiredate EXPIRE_DATE  用YYYY-MM-DD格式指定一个账户过期的日期<br>  -f, –inactive INACTIVE       指定这个账户密码过期后多少天这个账户被禁用；0表示密码一过期就被禁用，-1表示禁用这</p>
<pre><code>个功能</code></pre><p>  -g, –gid GROUP               指定用户所属组的GID或组名<br>  -G, –groups GROUPS           指定用户除所属组外的一个或多个附加组<br>  -h, –help                    display this help message and exit<br>  -k, –skel SKEL_DIR           必须和-m一起使用，将/etc/skel目录的内容复制到用户的HOME目录<br>  -K, –key KEY=VALUE           主要用来改写/etc/login.defs文件中的默认值，如：-K UID_MIN=100 –K UID_MAX=499<br>  -l, –no-log-init             do not add the user to the lastlog and</p>
<pre><code>faillog databases</code></pre><p>  -m, –create-home             创建用户的HOME目录<br>  -M, –no-create-home          不创建用户的HOME目录<br>  -N, –no-user-group           不创建与用户同名的用户组<br>  -o, –non-unique              仅与-u选项结合使用，允许创建一个用户ID不唯一的用户<br>  -p, –password PASSWORD       为用户指定默认密码<br>  -r, –system                  创建系统账户<br>  -R, –root CHROOT_DIR         允许用户根据配置文件来切换家目录<br>  -s, –shell SHELL             指定用户登录的shell<br>  -u, –uid UID                 指定用户的UID<br>  -U, –user-group              创建与用户同名的组<br>  -Z, –selinux-user SEUSER     此选项不常用</p>
</li>
<li><p>举例说明：</p>
<p>创建名为jerry的用户，指定HOME目录:/home/h_jerry,指定UID 1022，不创建同名用户组，指定密码：jerry,指定shell:/bin/sh,指定账户过期时间：2017-08-09，允许密码过期后使用，添加用户描述：first user</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@ha1 ~]# useradd -m -d &#x2F;home&#x2F;h_jerry -u 1022 -N -p jerry -s &#x2F;bin&#x2F;sh -e 2017-08-09 -f -1 -c &quot;first user&quot; jerry</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h5 id="2-1-用户组"><a href="#2-1-用户组" class="headerlink" title="2.1 用户组"></a>2.1 用户组</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# groupadd hr</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupadd sale</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupadd it</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupadd fd</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupadd market</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupadd net01 -g 2000		        //添加组net01，并指定gid 2000</span><br><span class="line"></span><br><span class="line">[root@jason ~]# grep 'net01' /etc/group		            //查看/etc/group中组net01信息</span><br><span class="line"></span><br><span class="line">[root@jason ~]# groupdel net01</span><br></pre></td></tr></table></figure>

<p>​                        //删除组net01</p>
<h5 id="2-2用户"><a href="#2-2用户" class="headerlink" title="2.2用户"></a>2.2用户</h5><p>useradd creates users </p>
<p>＝＝创建用户 未指定选项＝＝</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# useradd user01</span><br></pre></td></tr></table></figure>

<p>​        </p>
<p> . 未指定该用户的主组</p>
<p> . 未指定该用户的附加组</p>
<p> . 未指定用户的HOME . 未指定用户的SHELL</p>
<p> . 未指定用户的UID…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# grep 'user01' /etc/passwd /etc/shadow /etc/group  /var/spool/mail</span><br></pre></td></tr></table></figure>

<p> /etc/passwd:user01:x507:512::/home/user01:/bin/bash /etc/shadow:user01:!!:16589:0:99999:7::: </p>
<p>/etc/group:user01：x:512:</p>
<p>/etc/passwd         mysql2 :x：1000:1000:mysql2:/home/mysql2:/bin/bash      用户信息</p>
<p>/etc/shadow         mysql2:$1$G852z3He$lID6wwiIqQMNaJI97xSTx.:18132:0:99999:7:::    密码信息            </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$1       $G852z3He $lID6wwiIqQMNaJI97xSTx.:18132:0:99999:7::(密码有效期):    </span><br><span class="line">加密算法  盐        加密    18132密码最后修改时间 0密码最短修改时间 99最大存活时间99天后需要修改密码</span><br><span class="line">加密算法$id：</span><br><span class="line">$1：MD5</span><br><span class="line">$5：SHA-256	</span><br><span class="line">$6：SHA-512</span><br></pre></td></tr></table></figure>

<p>/etc/group        mysql2​: x :​1000:          组信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# id user01</span><br></pre></td></tr></table></figure>

<p>  uid=507(user01) gid=512(user01) groups=512(user01)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">shell[root@jason ~]# ls /var/spool/mail/user01</span><br></pre></td></tr></table></figure>



<p>/var/spool/mail/user01</p>
<p>***小结： 如果创建一个用户时，未指定任何组（主组或附加组），系统会创建一个和用户名相同的组作为用户的Primary Group.</p>
<p>  #####c.</p>
<h5 id="2-3-创建用户"><a href="#2-3-创建用户" class="headerlink" title="2.3.创建用户"></a>2.3.创建用户</h5><p>指定选项</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@jason ~]# useradd user02 -u 503        //创建用户usr02，指定uid</span><br><span class="line"></span><br><span class="line">[root@jason ~]# useradd user03 -d /aaa	     //创建用户user03 指定家目录</span><br><span class="line">[root@jason ~]# useradd user05 -s /sbin/nologin 	    //创建用户并指定shell一般设置这样的帐号是给启动服务的账号所用的，这只是让服务启动起来，但是不能登录系统</span><br><span class="line">[root@jason ~]# useradd user07 -G hr,it,fd		    //创建用户，指定附加组</span><br><span class="line">[root@jason ~]# useradd user10 -u 4000 -s /sbin/nologin</span><br></pre></td></tr></table></figure>







<p>userdel deletes users</p>
<h5 id="2-4删除用户"><a href="#2-4删除用户" class="headerlink" title="2.4删除用户"></a>2.4删除用户</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# userdel user10		                           //删除用户user10，但不删除用户家目录和mail spool</span><br><span class="line"></span><br><span class="line">[root@jason ~]# ll -d /home/user10/</span><br><span class="line">drwx------ 3 506 510 4096 09-01 21:14 /home/user10/</span><br><span class="line">[root@jason ~]# ll /var/mail/user10 </span><br><span class="line">-rw-rw---- 1 506 mail 0 09-01 21:14 /var/mail/user10</span><br><span class="line">[root@jason ~]# userdel -r user2                              //删除用户user2，同时删除用户家目录和mail spool</span><br></pre></td></tr></table></figure>

<p>＝＝用户密码＝＝</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# passwd alice                                  //root可以给任何用户设置密码</span><br><span class="line">[zhuzhu@jason ~]$ passwd                                      //普通用户只能给自己修改密</span><br></pre></td></tr></table></figure>

<p>码，而且必须提供原密码</p>
<p>usermod modifies existing users</p>
<h4 id="3-组成员管理"><a href="#3-组成员管理" class="headerlink" title="3 组成员管理"></a>3 组成员管理</h4><p>注意：只针对已存在的用户</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# usermod -G hr niuniu2                     //覆盖原有的附加组</span><br><span class="line">[root@jason ~]# usermod -G fd,it niuniu2</span><br><span class="line">[root@jason ~]# usermod -aG hr niuniu2                   //增加新的附加组</span><br><span class="line"></span><br><span class="line">[root@jason~]# gpasswd -a jack wheel                     //usermod -aG hr zhuzhu</span><br><span class="line">[root@jason~]# gpasswd -M zhuzhu,maomao100 hr   // 添加zhuzhu，maomao  hr组          </span><br><span class="line">[root@jason~]# gpasswd -d zhuzhu hr    //删除组hr</span><br></pre></td></tr></table></figure>

<p>＝＝其它选项管理＝＝</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jason ~]# usermod -s /sbin/nologin zhong   //不可登录</span><br><span class="line">[root@smile_fuxi ~]# su - zhong</span><br><span class="line">This account is currently not available.</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>Linux系统的基本操作</title>
    <url>/2019/07/16/Linux_basis/</url>
    <content><![CDATA[<p><strong>Linux也是一个操作系统，类似于Windows一样，但是Linux大多数都是使用命令行的形式去操作，并且它的系统性能也非常稳定以至于现在大多企业的业务都是跑在Linux上。</strong></p>
<p>1.登录root用户</p>
<p>2.打开主文件夹创建并删除文件</p>
<p>  列出当前目录的文件：ls</p>
<a id="more"></a>

<p>3.改变目录：cd  目录名</p>
<p>4.创建文件:touch 文件名</p>
<p>5.删除文件： rm -rf  文件名</p>
<p>6.改名文件：mv  源文件 目标文</p>
<p>​           剪切：mv  /yuan_path/yuan_filename  /new_path/new_filename </p>
<p>​    查看历史命令：history</p>
<p>   执行 num对应的历史命令：！num</p>
<p>   执行上一条命令：!!</p>
<p>​    退出系统：exit</p>
<p>7.文件系统目录结构</p>
<p>8.关机：init  0</p>
<p>​     Day 2<br>ls -l  =  ll<br>cd<br>cd /path<br>cd ~ go home<br>cd - 切换<br>cd .. 上级目录</p>
<p>touch  创建文件<br>mkdir    -pv 创建目录</p>
<p>cp  src（源文件）  dest    复制<br>mv  src（源文件）  dest    剪切  </p>
<p>查看文件</p>
<p>-a  (查看隐藏文件)</p>
<p>cat   filename（文件名称）       （-n -A）<br>more  filename（文件名称）        （回车下一行，空格下一页，q退出  ^c）<br>head头部<br>tail尾部<br>tac<br>grep  过滤关键字    grep 针对文件内容进行过滤        </p>
<p>grep ‘root’ /etc/passwd</p>
<p>grep ‘^root’ /etc/passwd ^以xxx结尾</p>
<p>grep ‘bash$’ /etc/passwd $以xxx结尾</p>
<p>grep ‘failure’ /var/log/secure           </p>
<p>（^以xxx开头的  $以XXX结尾的 ）</p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>12306自动抢票Linux版搭建</title>
    <url>/2019/06/15/12306/</url>
    <content><![CDATA[<h2 id="12306辅助抢票Linux版"><a href="#12306辅助抢票Linux版" class="headerlink" title="12306辅助抢票Linux版"></a>12306辅助抢票Linux版</h2><p><img src="https://i.loli.net/2019/12/25/wFdvxZbCLgTNMue.jpg" alt=""></p>
<a id="more"></a>
<h4 id="环境介绍："><a href="#环境介绍：" class="headerlink" title="环境介绍："></a>环境介绍：</h4><ul>
<li>centos7 x</li>
<li>python3.6.5</li>
<li>Google Chrome 76.0.3809.100  (适合chromedriver)</li>
</ul>
<p>要带安装有图形化界面的centos</p>
<p>服务器装图像化：<a href="https://blog.csdn.net/mamamalululu00000000/article/details/88106524" target="_blank" rel="noopener">https://blog.csdn.net/mamamalululu00000000/article/details/88106524</a> </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">安装图形化</span><br><span class="line">yum groups install &quot;X Window System&quot; -y</span><br><span class="line">yum groups install &quot;GNOME Desktop&quot; -y</span><br><span class="line">如果出现以下错误:</span><br><span class="line">file &#x2F;boot&#x2F;efi&#x2F;EFI&#x2F;centos from install of fwupdate-efi-12-5.el7.centos.x86_64 conflicts with file from package grub2-common-1:2.02-0.65.el7.centos.2.noarch</span><br><span class="line">执行</span><br><span class="line">yum upgrade -y</span><br><span class="line">然后再装，更新完一般没啥错了，错也不要管，往下走看看</span><br><span class="line">yum groups install &quot;GNOME Desktop&quot; -y</span><br><span class="line"></span><br><span class="line">systemctl set-default multi-user.target  &#x2F;&#x2F;设置成命令模式</span><br><span class="line">                                 or（或者）</span><br><span class="line">systemctl set-default graphical.target  &#x2F;&#x2F;设置成图形模式</span><br><span class="line">设置成图形模式</span><br></pre></td></tr></table></figure>

<p>然后登录阿里云实例控制台</p>
<p><img src="https://i.loli.net/2019/12/21/IEMUa3tRlJGhp6Y.jpg" alt=""></p>
<p>连接上然后reboot重启就成图形化界面了</p>
<p><img src="https://i.loli.net/2019/12/21/AOqkjI9CEm1ui5f.jpg" alt=""></p>
<p>不能在finalshell、xshell等远程控制终端 下执行 因为后面打开浏览器需要用到图形界面，所以只能在VMware下面直接操作</p>
<h4 id="一、下载安装python3-6-5"><a href="#一、下载安装python3-6-5" class="headerlink" title="一、下载安装python3.6.5"></a>一、下载安装python3.6.5</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">安装python可能用到的相关插件</span><br><span class="line">yum groupinstall &#39;Development Tools&#39; -y</span><br><span class="line">yum install -y ncurses-libs zlib-devel mysql-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br><span class="line"></span><br><span class="line">下载 （如果下载慢的话上传我的）</span><br><span class="line">[root@host4 ~]# cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;</span><br><span class="line">wget https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.6.5&#x2F;Python-3.6.5.tar.xz</span><br><span class="line"></span><br><span class="line">解压</span><br><span class="line">tar -xvf Python-3.6.5.tar.xz -C &#x2F;usr&#x2F;local&#x2F;</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;python3</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;Python-3.6.5</span><br><span class="line"></span><br><span class="line">编译安装</span><br><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python3 --enable-optimizations</span><br><span class="line">make</span><br><span class="line">make altinstall   </span><br><span class="line">(安装需要有点久)</span><br><span class="line"></span><br><span class="line">修改软链接：</span><br><span class="line">把原有的修改为：</span><br><span class="line">cd  &#x2F;usr&#x2F;bin&#x2F;</span><br><span class="line">创建一个软连接</span><br><span class="line">mv &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;python_old</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;python3.6 &#x2F;usr&#x2F;bin&#x2F;python</span><br><span class="line">mv &#x2F;usr&#x2F;bin&#x2F;pip &#x2F;usr&#x2F;bin&#x2F;pip_old</span><br><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python3&#x2F;bin&#x2F;pip3.6 &#x2F;usr&#x2F;bin&#x2F;pip</span><br><span class="line">创建软连接之前一定要对以存在的&#x2F;usr&#x2F;bin&#x2F;python更名，否则出现如下错误</span><br><span class="line">ln: failed to create symbolic link ‘&#x2F;usr&#x2F;bin&#x2F;python’: File exists</span><br><span class="line"></span><br><span class="line">!!!!!!重要！！！！！我之前就是因为这个yum 命令用不了 </span><br><span class="line">最后修改yum&#x2F;gnome-tweak-tool&#x2F;urlgrabber配置文件，否则之后使用yum可能报错</span><br><span class="line"></span><br><span class="line">以下文件都要修改文件行首处</span><br><span class="line">[root@host4 local]# cd &#x2F;usr&#x2F;bin&#x2F;</span><br><span class="line">[[root@host4 bin]# ls yum*    &#x2F;&#x2F;下面几个文件把开头的Python末尾改成Python2</span><br><span class="line">yum  yum-builddep  yum-config-manager  yum-debug-dump  yum-debug-restore  yumdownloader  yum-groups-manager</span><br><span class="line">[root@host4 bin]#ls yum*</span><br><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;python</span><br><span class="line">改为:</span><br><span class="line">#! &#x2F;usr&#x2F;bin&#x2F;python2     (修改第一行)</span><br><span class="line">就是把原来额Python后面添加2就行了</span><br><span class="line">以下一样（下面如果你主机没有那项就不用管）</span><br><span class="line">[root@host4 bin]# vim &#x2F;usr&#x2F;bin&#x2F;yum</span><br><span class="line">[root@host4 bin]# vim yum-builddep </span><br><span class="line">[root@host4 bin]# vim yum-config-manager </span><br><span class="line">[root@host4 bin]# vim yum-debug-dump </span><br><span class="line">[root@host4 bin]# vim yum-debug-restore </span><br><span class="line">[root@host4 bin]# vim yumdownloader </span><br><span class="line">[root@host4 bin]# vim yum-groups-manager</span><br><span class="line">[root@host4 bin]# vim &#x2F;usr&#x2F;bin&#x2F;gnome-tweak-tool  </span><br><span class="line">[root@host4 bin]# vim &#x2F;usr&#x2F;bin&#x2F;urlgrabber  </span><br><span class="line">[root@host4 bin]# vim &#x2F;usr&#x2F;libexec&#x2F;urlgrabber-ext-down</span><br><span class="line"></span><br><span class="line">配置python环境</span><br><span class="line">[root@host4 bin]# vim &#x2F;etc&#x2F;profile.d&#x2F;python3.sh</span><br><span class="line">export PYTHON_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;python3   (python的安装路径)</span><br><span class="line">export PATH&#x3D;$PYTHON_HOME&#x2F;bin:$PATH</span><br><span class="line">[root@host4 bin]# source &#x2F;etc&#x2F;profile.d&#x2F;python3.sh</span><br><span class="line">[root@host4 bin]# python -V</span><br><span class="line">Python 3.6.5</span><br><span class="line"> </span><br><span class="line">------ok python环境搭建好</span><br></pre></td></tr></table></figure>

<h4 id="二、安装linux版谷歌"><a href="#二、安装linux版谷歌" class="headerlink" title="二、安装linux版谷歌"></a>二、安装linux版谷歌</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">需要把防火墙和selinux关闭（一键三连）</span><br><span class="line">[root@host4 ~]# vim &#x2F;etc&#x2F;selinux&#x2F;config</span><br><span class="line">selinux&#x3D;disable</span><br><span class="line">1、上传包readme.zip  </span><br><span class="line">上传readme.zip包到 &#x2F;use&#x2F;local&#x2F;src 下 （随便一个目录）</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;src</span><br><span class="line">rz （上传包）</span><br><span class="line">unzip readme.zip</span><br><span class="line">cd readme&#x2F;linux</span><br><span class="line">[root@host4 linux]# ls</span><br><span class="line">chromedriver  font.zip  google-chrome-stable_current_x86_64.rpm  </span><br><span class="line"></span><br><span class="line">2、安装谷歌浏览器</span><br><span class="line">[root@host4 linux]# yum -y localinstall google-chrome-stable_current_x86_64.rpm  &#x2F;&#x2F;自己解决依赖问题</span><br><span class="line"></span><br><span class="line">3、将linux 目录下 chromedriver复制到 </span><br><span class="line">&#x2F;usr&#x2F;bin </span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F; 两个目录下（具体是哪个忘了 反正两个都复制行了）</span><br><span class="line">[root@host4 linux]# cp chromedriver &#x2F;usr&#x2F;bin</span><br><span class="line">[root@host4 linux]# cp chromedriver &#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;</span><br><span class="line">[root@host4 linux]# chmod +x &#x2F;usr&#x2F;bin&#x2F;chromedriver </span><br><span class="line">4、安装字体。linux 目录下有 font.zip,复制解压到目录: &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local</span><br><span class="line">mkdir &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local</span><br><span class="line">cp font.zip &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local</span><br><span class="line">cd &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local</span><br><span class="line">unzip font.zip</span><br><span class="line">chmod 777 -R &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local    &#x2F;&#x2F;给目录添加权限  </span><br><span class="line">fc-cache &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;local&#x2F;       &#x2F;&#x2F;安装字体 </span><br><span class="line"></span><br><span class="line">5、修改谷歌浏览器配置（最后行）</span><br><span class="line">[root@host4 ~]# vim &#x2F;usr&#x2F;bin&#x2F;google-chrome</span><br><span class="line">exec -a &quot;$0&quot; &quot;$HERE&#x2F;chrome&quot; &quot;$@&quot; --no-sandbox</span><br><span class="line"></span><br><span class="line">6、启动(不能在finalshell或者xshell启动) 去带有图形界面的VM下启动，启动弹出个浏览器就可以关了</span><br><span class="line">[root@host4 ~]# &#x2F;usr&#x2F;bin&#x2F;google-chrome-stable --no-sandbox</span><br></pre></td></tr></table></figure>

<h4 id="三、安装12306主程序"><a href="#三、安装12306主程序" class="headerlink" title="三、安装12306主程序"></a>三、安装12306主程序</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1、上传这个12306包、可以去GitHub直接clone 或者先下载在本地  藐视clone有点慢</span><br><span class="line">GitHub地址:  https:&#x2F;&#x2F;github.com&#x2F;testerSunshine&#x2F;12306</span><br><span class="line"></span><br><span class="line">如果是本地下载上来的先解压到你需要存放的地方 </span><br><span class="line">12306-master.zip</span><br><span class="line">2、然后进入包目录下</span><br><span class="line">cd &#x2F;date</span><br><span class="line">rz</span><br><span class="line">unzip 12306.zip</span><br><span class="line">[root@host4 ~]# cd &#x2F;date&#x2F;12306&#x2F; </span><br><span class="line"></span><br><span class="line">3、安装依赖包（一定要在12306项目包中安装）</span><br><span class="line">[root@host4 12306]# pip3 install -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple -r requirements.txt  </span><br><span class="line">如果没有pip3就是用pip执行</span><br><span class="line">[root@host4 12306]# pip install -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple -r requirements.txt  </span><br><span class="line">&#x2F;&#x2F;安装过程估计会有网络超时之类的，如果安装不成功就继续安装   不然后面出现一堆错误让你更加头疼</span><br><span class="line">安装完成后会有让你更新 ‘pip install ---’</span><br><span class="line">你就更新它</span><br><span class="line"></span><br><span class="line">[root@host4 12306]# pip install --upgrade pip</span><br><span class="line">报错就再执行一次，两次  再把错截图给我</span><br><span class="line">[root@host4 12306]# pip3 install -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple -r requirements.txt</span><br><span class="line">4、以下一些配置文件，我也不懂是啥 反正不修改就报错</span><br><span class="line">[root@host4 12306]# vim &#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;tensorflow&#x2F;python&#x2F;framework&#x2F;dtypes.py +516</span><br><span class="line">#把原来的替换成下面的</span><br><span class="line">_np_qint8 &#x3D; np.dtype([(&quot;qint8&quot;, np.int8, (1,))])</span><br><span class="line">_np_quint8 &#x3D; np.dtype([(&quot;quint8&quot;, np.uint8, (1,))])</span><br><span class="line">_np_qint16 &#x3D; np.dtype([(&quot;qint16&quot;, np.int16, (1,))])</span><br><span class="line">_np_quint16 &#x3D; np.dtype([(&quot;quint16&quot;, np.uint16, (1,))])</span><br><span class="line">_np_qint32 &#x3D; np.dtype([(&quot;qint32&quot;, np.int32, (1,))])</span><br><span class="line"></span><br><span class="line">不同Python路径也不同上面的不行就找下面这条。再不行就自己找  find &#x2F; -name &quot;dtypes.py&quot;</span><br><span class="line">[root@host4 12306]# vim &#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;tensorflow_core&#x2F;python&#x2F;framework&#x2F;dtypes.py +516</span><br><span class="line">#把原来的替换成下面的</span><br><span class="line">_np_qint8 &#x3D; np.dtype([(&quot;qint8&quot;, np.int8, (1,))])</span><br><span class="line">_np_quint8 &#x3D; np.dtype([(&quot;quint8&quot;, np.uint8, (1,))])</span><br><span class="line">_np_qint16 &#x3D; np.dtype([(&quot;qint16&quot;, np.int16, (1,))])</span><br><span class="line">_np_quint16 &#x3D; np.dtype([(&quot;quint16&quot;, np.uint16, (1,))])</span><br><span class="line">_np_qint32 &#x3D; np.dtype([(&quot;qint32&quot;, np.int32, (1,))])</span><br><span class="line"></span><br><span class="line">[root@host4 12306]# vim &#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;tensorboard&#x2F;compat&#x2F;tensorflow_stub&#x2F;dtypes.py +541 </span><br><span class="line">#把原来的替换成下面的</span><br><span class="line">_np_qint8 &#x3D; np.dtype([(&quot;qint8&quot;, np.int8, (1,))])</span><br><span class="line">_np_quint8 &#x3D; np.dtype([(&quot;quint8&quot;, np.uint8, (1,))])</span><br><span class="line">_np_qint16 &#x3D; np.dtype([(&quot;qint16&quot;, np.int16, (1,))])</span><br><span class="line">_np_quint16 &#x3D; np.dtype([(&quot;quint16&quot;, np.uint16, (1,))])</span><br><span class="line">_np_qint32 &#x3D; np.dtype([(&quot;qint32&quot;, np.int32, (1,))])</span><br><span class="line"></span><br><span class="line">[root@host4 12306]# vim &#x2F;usr&#x2F;local&#x2F;python3&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;keras&#x2F;engine&#x2F;saving.py +292</span><br><span class="line">&#x2F;&#x2F;注释掉一下三行</span><br><span class="line">    # warnings.warn(&#39;No training configuration found in save file: &#39;</span><br><span class="line">    #               &#39;the model was *not* compiled. &#39;</span><br><span class="line">    #               &#39;Compile it manually.&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="四、修改配置文件："><a href="#四、修改配置文件：" class="headerlink" title="四、修改配置文件："></a>四、修改配置文件：</h4><p>可以参考我下面的配置     </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># -*- coding&#x3D;utf-8 -*-</span><br><span class="line"># 关于软件使用配置说明，一定要看！！！</span><br><span class="line"># ps: 如果是候补车票，需要通过人证一致性核验的用户及激活的“铁路畅行”会员可以提交候补需求，请您按照操作说明在铁路12306app.上完成人证核验</span><br><span class="line"># 关于候补了之后是否还能继续捡漏的问题在此说明： 软件为全自动候补加捡漏，如果软件候补成功则会停止抢票，发出邮件通知，但是不会影响你继续捡漏，</span><br><span class="line"># 如果这个时候捡漏捡到的话，也是可以付款成功的，也就是说，捡漏+候补，可以最大程度提升抢票成功率</span><br><span class="line"></span><br><span class="line"># 刷票模式：1&#x3D;刷票 2&#x3D;候补+刷票</span><br><span class="line">TICKET_TYPE &#x3D; 1</span><br><span class="line"></span><br><span class="line"># 出发日期(list) &quot;2018-01-06&quot;, &quot;2018-01-07&quot;</span><br><span class="line">STATION_DATES &#x3D; [</span><br><span class="line">    &quot;2020-01-18&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># 填入需要购买的车次(list)，&quot;G1353&quot;</span><br><span class="line"># 修改车次填入规则，注：(以前设置的车次逻辑不变)，如果车次填入为空，那么就是当日乘车所有车次都纳入筛选返回</span><br><span class="line"># 不填车次是整个list为空才算，如果不是为空，依然会判断车次的，这种是错误的写法 [&quot;&quot;], 正确的写法 []</span><br><span class="line">STATION_TRAINS &#x3D; [&quot;D3714&quot;, &quot;D3830&quot;]</span><br><span class="line"></span><br><span class="line"># 出发城市，比如深圳北，就填深圳就搜得到</span><br><span class="line">FROM_STATION &#x3D; &quot;广州南&quot;</span><br><span class="line"></span><br><span class="line"># 到达城市 比如深圳北，就填深圳就搜得到</span><br><span class="line">TO_STATION &#x3D; &quot;梧州南&quot;</span><br><span class="line"></span><br><span class="line"># 座位(list) 多个座位ex:</span><br><span class="line"># &quot;商务座&quot;,</span><br><span class="line"># &quot;一等座&quot;,</span><br><span class="line"># &quot;二等座&quot;,</span><br><span class="line"># &quot;特等座&quot;,</span><br><span class="line"># &quot;软卧&quot;,</span><br><span class="line"># &quot;硬卧&quot;,</span><br><span class="line"># &quot;硬座&quot;,</span><br><span class="line"># &quot;无座&quot;,</span><br><span class="line"># &quot;动卧&quot;,</span><br><span class="line">SET_TYPE &#x3D; [&quot;二等座&quot;, &quot;无座&quot;]</span><br><span class="line"></span><br><span class="line"># 当余票小于乘车人，如果选择优先提交，则删减联系人和余票数一致在提交</span><br><span class="line"># bool</span><br><span class="line">IS_MORE_TICKET &#x3D; True</span><br><span class="line"></span><br><span class="line"># 乘车人(list) 多个乘车人ex:</span><br><span class="line"># &quot;张三&quot;,</span><br><span class="line"># &quot;李四&quot;</span><br><span class="line">TICKET_PEOPLES &#x3D; [&quot;***&quot;]</span><br><span class="line"></span><br><span class="line"># 12306登录账号</span><br><span class="line">USER &#x3D; &quot;lingji*****&quot;</span><br><span class="line">PWD &#x3D; &quot;zhong9******&quot;</span><br><span class="line"></span><br><span class="line"># 加入小黑屋时间默认为5分钟，此功能为了防止僵尸票导致一直下单不成功错过正常的票</span><br><span class="line">TICKET_BLACK_LIST_TIME &#x3D; 5</span><br><span class="line"></span><br><span class="line"># 自动打码</span><br><span class="line">IS_AUTO_CODE &#x3D; True</span><br><span class="line"></span><br><span class="line"># 设置2本地自动打码，需要配置tensorflow和keras库，3为云打码，由于云打码服务器资源有限(为2h4C的cpu服务器)，请不要恶意请求，不然只能关闭服务器</span><br><span class="line"># ps: 请不要一直依赖云服务器资源，在此向所有提供服务器同学表示感谢</span><br><span class="line">AUTO_CODE_TYPE &#x3D; 2</span><br><span class="line"></span><br><span class="line"># 此处设置云打码服务器地址，如果有自建的服务器，可以自行更改</span><br><span class="line">HOST &#x3D; &quot;120.77.154.140:8000&quot;</span><br><span class="line">REQ_URL &#x3D; &quot;&#x2F;verify&#x2F;base64&#x2F;&quot;</span><br><span class="line">HTTP_TYPE &#x3D; &quot;http&quot;</span><br><span class="line"># HOST&#x3D;&quot;12306.yinaoxiong.cn&quot; #备用服务器稳定性较差</span><br><span class="line"># REQ_URL&#x3D;&quot;&#x2F;verify&#x2F;base64&#x2F;&quot;</span><br><span class="line"># HTTP_TYPE&#x3D;&quot;https&quot;</span><br><span class="line"></span><br><span class="line">#  邮箱配置，如果抢票成功，将通过邮件配置通知给您</span><br><span class="line">#  列举163</span><br><span class="line">#  email: &quot;xxx@163.com&quot;</span><br><span class="line">#  notice_email_list: &quot;123@qq.com&quot;</span><br><span class="line">#  username: &quot;xxxxx&quot;</span><br><span class="line">#  password: &quot;xxxxx</span><br><span class="line">#  host: &quot;smtp.163.com&quot;</span><br><span class="line">#  列举qq  ，qq设置比较复杂，需要在邮箱--&gt;账户--&gt;开启smtp服务，取得授权码&#x3D;&#x3D;邮箱登录密码</span><br><span class="line">#  email: &quot;xxx@qq.com&quot;</span><br><span class="line">#  notice_email_list: &quot;123@qq.com&quot;</span><br><span class="line">#  username: &quot;xxxxx&quot;</span><br><span class="line">#  password: &quot;授权码&quot;</span><br><span class="line">#  host: &quot;smtp.qq.com&quot;</span><br><span class="line">EMAIL_CONF &#x3D; &#123;</span><br><span class="line">    &quot;IS_MAIL&quot;: True,</span><br><span class="line">    &quot;email&quot;: &quot;5934*****@qq.com&quot;,</span><br><span class="line">    &quot;notice_email_list&quot;: &quot;5934*****@qq.com&quot;,</span><br><span class="line">    &quot;username&quot;: &quot;593*****&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;tzoljbo******&quot;,</span><br><span class="line">    &quot;host&quot;: &quot;smtp.qq.com&quot;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 是否开启 server酱 微信提醒， 使用前需要前往 http:&#x2F;&#x2F;sc.ftqq.com&#x2F;3.version 扫码绑定获取 SECRET 并关注获得抢票结果通知的公众号</span><br><span class="line">SERVER_CHAN_CONF &#x3D; &#123;</span><br><span class="line">    &quot;is_server_chan&quot;: True,</span><br><span class="line">    &quot;secret&quot;: &quot;SCU63040T5b4f2aee7918e540974374b09****************&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 是否开启cdn查询，可以更快的检测票票 1为开启，2为关闭</span><br><span class="line">IS_CDN &#x3D; 1</span><br><span class="line"></span><br><span class="line"># 下单接口分为两种，1 模拟网页自动捡漏下单（不稳定），2 模拟车次后面的购票按钮下单（稳如老狗）</span><br><span class="line">ORDER_TYPE &#x3D; 2</span><br><span class="line"></span><br><span class="line"># 下单模式 1 为预售，整点刷新，刷新间隔0.1-0.5S, 然后会校验时间，比如12点的预售，那脚本就会在12.00整检票，刷新订单</span><br><span class="line">#         2 是捡漏，捡漏的刷新间隔时间为0.5-3秒，时间间隔长，不容易封ip</span><br><span class="line">ORDER_MODEL &#x3D; 2</span><br><span class="line"></span><br><span class="line"># 是否开启代理, 0代表关闭， 1表示开始</span><br><span class="line"># 开启此功能的时候请确保代理ip是否可用，在测试放里面经过充分的测试，再开启此功能，不然可能会耽误你购票的宝贵时间</span><br><span class="line"># 使用方法：</span><br><span class="line"># 1、在agency&#x2F;proxy_list列表下填入代理ip</span><br><span class="line"># 2、测试UnitTest&#x2F;TestAll&#x2F;testProxy 测试代理是否可以用</span><br><span class="line"># 3、开启代理ip</span><br><span class="line">IS_PROXY &#x3D; 0</span><br><span class="line"></span><br><span class="line"># 预售放票时间, 如果是捡漏模式，可以忽略此操作</span><br><span class="line">OPEN_TIME &#x3D; &quot;12:59:57&quot;</span><br><span class="line"># 1&#x3D;使用selenium获取devicesID</span><br><span class="line"># 2&#x3D;使用网页端&#x2F;otn&#x2F;HttpZF&#x2F;logdevice获取devicesId，这个接口的算法目前可能有点问题，如果登录一直302的请改为配置1</span><br><span class="line"># 3&#x3D;自己打开浏览器在headers-Cookies中抓取RAIL_DEVICEID和RAIL_EXPIRATION，这个就不用配置selenium</span><br><span class="line">COOKIE_TYPE &#x3D; 1</span><br><span class="line"># 如果COOKIE_TYPE&#x3D;1，则需配置chromeDriver路径,下载地址http:&#x2F;&#x2F;chromedriver.storage.googleapis.com&#x2F;index.html</span><br><span class="line"># chromedriver配置版本只要和chrome的大版本匹配就行</span><br><span class="line">CHROME_PATH &#x3D; &quot;&#x2F;usr&#x2F;bin&#x2F;chromedriver&quot;</span><br><span class="line"></span><br><span class="line"># 为了docker37 准备的环境变量，windows环境可以不用管这个参数</span><br><span class="line">CHROME_CHROME_PATH &#x3D; &quot;&#x2F;opt&#x2F;google&#x2F;chrome&#x2F;google-chrome&quot;</span><br><span class="line"></span><br><span class="line"># 如果COOKIE_TYPE&#x3D;3, 则需配置RAIL_EXPIRATION、RAIL_DEVICEID的值</span><br><span class="line">RAIL_EXPIRATION &#x3D; &quot;&quot;</span><br><span class="line">RAIL_DEVICEID &#x3D; &quot;&quot;</span><br><span class="line"># RAIL_EXPIRATION &#x3D; &quot;1577034103293&quot;</span><br><span class="line"># RAIL_DEVICEID &#x3D; &quot;CDno29Erc_Pf3FSXb4dzq-Op64EhWrsi5yUZKVIKR1MAfYo2qFlCeXD8VkexY7_1qg-ClV-fE8j9jgVlPZxRh3wVc2iqLe_5A8sdr62qZx4B22JPF8lFCjpgTKZ5ODW90HJd5tiQsJ1KR9nOqHRxHj1FT5LEIwfw&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 1&#x3D;&gt;为一直随机ua,2-&gt;只启动的时候随机一次ua</span><br><span class="line">RANDOM_AGENT &#x3D; 2</span><br><span class="line"></span><br><span class="line">PASSENGER_TICKER_STR &#x3D; &#123;</span><br><span class="line">    &#39;一等座&#39;: &#39;M&#39;,</span><br><span class="line">    &#39;特等座&#39;: &#39;P&#39;,</span><br><span class="line">    &#39;二等座&#39;: &#39;O&#39;,</span><br><span class="line">    &#39;商务座&#39;: 9,</span><br><span class="line">    &#39;硬座&#39;: 1,</span><br><span class="line">    &#39;无座&#39;: 1,</span><br><span class="line">    &#39;软座&#39;: 2,</span><br><span class="line">    &#39;软卧&#39;: 4,</span><br><span class="line">    &#39;硬卧&#39;: 3,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 保护12306官网请求频率，设置随机请求时间，原则为5分钟不大于80次</span><br><span class="line"># 最大间隔请求时间</span><br><span class="line">MAX_TIME &#x3D; 3</span><br><span class="line"># 最小间隔请求时间</span><br><span class="line">MIN_TIME &#x3D; 1</span><br><span class="line"></span><br><span class="line"># 软件版本</span><br><span class="line">RE_VERSION &#x3D; &quot;1.2.004&quot;</span><br></pre></td></tr></table></figure>

<h4 id="五、启动"><a href="#五、启动" class="headerlink" title="五、启动"></a>五、启动</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">6、启动(不能在finalshell或者xshell启动) 去带有图形界面的VM下启动，启动会自动弹出一个12306官网页面，不用管，等会就会自动关闭</span><br><span class="line">[root@host4 12306-master]# python run.py  </span><br><span class="line">WARNING:----</span><br><span class="line">WARNING:----</span><br><span class="line"></span><br><span class="line">会报一堆警告信息的 不要理他</span><br></pre></td></tr></table></figure>



<h4 id="六、配置邮箱提示"><a href="#六、配置邮箱提示" class="headerlink" title="六、配置邮箱提示"></a>六、配置邮箱提示</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1、配置QQ邮箱提示</span><br><span class="line">首先去QQ邮箱里面获取一个授权码</span><br><span class="line">设置--&gt; 账户 --&gt;POP3&#x2F;IMAP服务--&gt;开启</span><br><span class="line">然后把授权码复制到passwor双引号里面</span><br><span class="line">EMAIL_CONF &#x3D; &#123;</span><br><span class="line">    &quot;IS_MAIL&quot;: True,</span><br><span class="line">    &quot;email&quot;: &quot;5934****@qq.com&quot;,    &lt;-----QQ邮箱</span><br><span class="line">    &quot;notice_email_list&quot;: &quot;5934****@qq.com&quot;,  &lt;----QQ邮箱</span><br><span class="line">    &quot;username&quot;: &quot;5934*****&quot;,        &lt;-----QQ账号</span><br><span class="line">    &quot;password&quot;: &quot;tzolj********&quot;,  &lt;----授权码</span><br><span class="line">    &quot;host&quot;: &quot;smtp.qq.com&quot;,   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2、配置163邮箱提示</span><br><span class="line">也是要先获取授权码</span><br><span class="line">设置 ---&gt;POP3&#x2F;SMTP&#x2F;IMAP ---&gt;客户端授权码 ---&gt;生成授权码</span><br><span class="line">EMAIL_CONF &#x3D; &#123;</span><br><span class="line">    &quot;IS_MAIL&quot;: True,</span><br><span class="line">    &quot;email&quot;: &quot;abcd****@163.com&quot;,</span><br><span class="line">    &quot;notice_email_list&quot;: &quot;abcd****@163.com&quot;,</span><br><span class="line">    &quot;username&quot;: &quot;abcd****&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;tzolj********&quot;,  &lt;----授权码</span><br><span class="line">    &quot;host&quot;: &quot;smtp.163.com&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
  </entry>
</search>
